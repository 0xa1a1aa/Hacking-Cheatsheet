>[!Note]
>FTP uses 2 ports: port 21 as control channel and port 20 as data channel.
>It supports two distinct modes to establish the data channel:
>**Active mode**: FTP server connects to an announced client port (a client firewall might be a problem, since it blocks all external connection attempts. Thus the passive mode was created)
>**Passive mode**: Client connects to an announced server port

List of **FTP commands**:
https://en.wikipedia.org/wiki/List_of_FTP_commands

Some useful commands:
`ls` - Listing
`ls -R` - Recursive Listing
`status` - Information on the server status
`get <file>` - Download file
`put <file>` - Upload file

Download all files from an FTP server:
```bash
wget -m --no-passive ftp://anonymous:anonymous@<ip>
```

Connect to ftp server:
```bash
ftp <ip>
```

If the FTP server uses encrypted communication we can connect via openssl:
```bash
openssl s_client -connect <ip>:21 -starttls ftp
```
The SSL certificate allows us to recognize the hostname and in most cases also an email address.

---

Brute passwords with hydra:
```bash
hydra -l root -P /usr/share/wordlists/rockyou.txt <ip> ftp
```

## Commands

If you run `ls` and the server outputs `229 Entering Extended Passive Mode (|||26205|)`, press Ctrl+C, run the below commands and try again:
```
passive off
epsv4 off
```

List all (also hidden) files:
```ftp
ls -a
```

Set transmission to binary instead of ascii:
```ftp
binary
```

Set transmission to ascii instead of binary:
```ftp
ascii #Set transmission to ascii instead of binary
```

---
# TFTP

TFTP uses UDP. No user's authentication and protected login via passwords.

A few commands of `TFTP`:

|**Commands**|**Description**|
|---|---|
|`connect`|Sets the remote host, and optionally the port, for file transfers.|
|`get`|Transfers a file or set of files from the remote host to the local host.|
|`put`|Transfers a file or set of files from the local host onto the remote host.|
|`quit`|Exits tftp.|
|`status`|Shows the current status of tftp, including the current transfer mode (ascii or binary), connection status, time-out value, and so on.|
|`verbose`|Turns verbose mode, which displays additional information during file transfer, on or off.|

Unlike the FTP client, `TFTP` does not have directory listing functionality.