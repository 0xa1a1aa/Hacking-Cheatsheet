Show information:
```bash
smbmap -H <ip>
```

List shares:
```bash
smbclient -L \\\\<ip>\\
```

Connect to share:
```bash
smbclient \\\\<ip>\\<share>
```

"Anonymous" login (`null session`, `-N`):
```bash
smbclient -N \\\\<ip>\\<share>
```

Some useful commands:
`help` - Command listing
`ls` - Directory listing
`get <file>` - Download file
`!<cmd>` - Execute local system command

---
# rpcclient

Connect to SMB server via `rpcclient:
```bash
rpcclient -U "" <ip>
```
Arguments:
`-U ""`: User (`""` here means anonymous, null-session)

Some useful commands:

| **Query**                 | **Description**                                                    |
| ------------------------- | ------------------------------------------------------------------ |
| `srvinfo`                 | Server information.                                                |
| `enumdomains`             | Enumerate all domains that are deployed in the network.            |
| `querydominfo`            | Provides domain, server, and user information of deployed domains. |
| `netshareenumall`         | Enumerates all available shares.                                   |
| `netsharegetinfo <share>` | Provides information about a specific share.                       |
| `enumdomusers`            | Enumerates all domain users.                                       |
| `queryuser <RID>`         | Provides information about a specific user.                        |
| `querygroup <RID>`        | Provides information about a specific group.                       |
## Brute Forcing User RIDs

Via bash for loop:
```bash
for i in $(seq 500 1100);do rpcclient -N -U "" <ip> -c "queryuser 0x$(printf '%x\n' $i)" | grep "User Name\|user_rid\|group_rid" && echo "";done
```

Via Impacket - Samrdump.py:
```bash
impacket-samrdump <ip>
```

---
# More tools

CrackMapExec (NetExec)
```
crackmapexec smb <ip> --shares -u '' -p ''
```

enum4linux-ng:
```
enum4linux-ng -A <ip>
```